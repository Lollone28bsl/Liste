# Porto Harbor Management System - Coding Instructions

## Project Overview
Porto is a Java-based harbor management system that simulates boat mooring and rental operations. The system manages 100 mooring positions with specialized slot assignment rules and rental fee calculations based on boat type.

## Architecture

### Core Components

**Barca (Boat)** - Data class in [src/Barca.java](src/Barca.java)
- Immutable boat properties: `nome`, `nazionalita`, `lunghezza`, `stazza`, `tipologia`
- Typology: "vela" (sailboat) or "motore" (motorboat) - drives pricing and slot assignment rules

**Porto (Harbor)** - Main management class in [src/Porto.java](src/Porto.java)
- `posti`: Fixed-size array of 100 Barca slots (1-indexed externally, 0-indexed internally)
- Manages boat assignment, tracking, and rental calculations
- File persistence via `salvaSuFile()` writes to `porto.txt`

**App** - Entry point in [src/App.java](src/App.java)
- Demonstrates all core workflows: boat creation, assignment, searching, rental billing, filtering

## Critical Business Rules

### Slot Assignment (`assegnaPosto`)
1. **Sailboats ("vela")**: Cannot occupy slots 0-49 (reserved for motorboats)
2. **Large motorboats (>10m)**: Cannot occupy slots 0-19
3. Find first available slot matching these constraints or throw exception

### Rental Pricing (`liberaPosto`)
- **Sailboats**: `lunghezza × 10 × giorni` €
- **Motorboats**: `stazza × 20 × giorni` €
- Throws exception if slot invalid or empty

### Boat Lookup & Filtering
- `cercaBarca(int posto)`: Direct slot lookup with 1-based position
- `barchePerNazionalita(String naz)`: Iterates all slots, returns String array (case-insensitive match)

## Implementation Patterns

1. **Exception Handling**: All public methods that modify state throw checked exceptions with descriptive messages
2. **Array-based Storage**: No collections framework for core storage (only ArrayList for temporary filtering results)
3. **File I/O**: Simple line-delimited format with FileWriter; no closing guarantees in current implementation
4. **1-based External API**: User-facing methods use 1-based indexing; internally convert to 0-based arrays

## Build & Run

No build tool configured (basic Java in VS Code). Compile and run via VS Code extension or:
```bash
javac -d bin src/*.java
java -cp bin App
```

## Common Development Tasks

- **Add boat rules**: Modify conditional checks in `assegnaPosto()` method
- **Change slot count**: Update `posti` array size and validate boundary conditions (position < 1 or > 100)
- **New rental calculation**: Add boat type case to `liberaPosto()` pricing logic
- **New filtering method**: Follow pattern of `barchePerNazionalita()` iterating `posti` array

## Files to Know

- [src/Porto.java](src/Porto.java) - Harbor logic (68 lines, read fully before modifications)
- [src/Barca.java](src/Barca.java) - Data model
- [src/App.java](src/App.java) - Usage examples and test cases
- [porto.txt](porto.txt) - Persisted state (auto-generated by `salvaSuFile()`)
